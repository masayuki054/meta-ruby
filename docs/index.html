<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<title>メタプログラミング オブジェクト指向 メタプログラミング Ruby</title>
<!-- 2016-10-01 土 22:34 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="suzuki@cis.iwate-u.ac.jp" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/hideshow.css"/>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.zclip.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://wiki.cis.iwate-u.ac.jp/~suzuki/org-html-theme/styles/bigblow/css/bigblow.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/hideshow.css"/>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">メタプログラミング オブジェクト指向 メタプログラミング Ruby</h1>
<div id="table-of-contents">
<h2>&#30446;&#27425;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. <span class="timestamp-wrapper"><span class="timestamp">&lt;2016-10-03 月&gt;</span></span>の講義予定</a>
<ul>
<li><a href="#sec-1-1">1.1. 講義資料の説明</a></li>
<li><a href="#sec-1-2">1.2. オブジェクト指向入門</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. プログラム言語とは</a>
<ul>
<li><a href="#sec-1-2-1-1">記述のための要素</a></li>
<li><a href="#sec-1-2-1-2">実行するということ</a></li>
<li><a href="#sec-1-2-1-3">メタプログラミング</a></li>
</ul>
</li>
<li><a href="#sec-1-2-2">1.2.2. WikiPedia.search("オブジェクト指向プログラミング")</a></li>
<li><a href="#sec-1-2-3">1.2.3. 僕の考え</a></li>
<li><a href="#sec-1-2-4">1.2.4. Rubyらしさ</a></li>
<li><a href="#sec-1-2-5">1.2.5. まつもと直伝プログラミングの掟</a>
<ul>
<li><a href="#sec-1-2-5-1">第一回　</a></li>
<li><a href="#sec-1-2-5-2">第二回，第三回，第四回　ぐらい読みたい</a></li>
<li><a href="#sec-1-2-5-3">まつもと直伝プログラミングの掟のまとめ</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Ruby入門</a></li>
<li><a href="#sec-1-4">1.4. オブジェクト指向プログラミング Ruby</a></li>
<li><a href="#sec-1-5">1.5. メタプログラミング Ruby</a></li>
<li><a href="#sec-1-6">1.6. .links</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1. meta-ruby</a></li>
<li><a href="#sec-1-6-2">1.6.2. .links</a>
<ul>
<li><a href="#sec-1-6-2-1">講義</a>
<ul>
<li><a href="#sec-1-6-2-1-1">主たるねらい</a></li>
<li><a href="#sec-1-6-2-1-2">もうひとつのねらい</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2">2. ruby</a>
<ul>
<li><a href="#sec-2-1">2.1. ruby 情報</a>
<ul>
<li><a href="#sec-2-1-1">2.1.1. ruby の情報</a></li>
<li><a href="#sec-2-1-2">2.1.2. manual</a></li>
</ul>
</li>
<li><a href="#sec-2-2">2.2. ruby入門</a>
<ul>
<li><a href="#sec-2-2-1">2.2.1. 2016</a></li>
<li><a href="#sec-2-2-2">2.2.2. 2015</a>
<ul>
<li><a href="#sec-2-2-2-1">内容  <code>[1/10]</code></a></li>
</ul>
</li>
<li><a href="#sec-2-2-3">2.2.3. その他の入門</a></li>
</ul>
</li>
<li><a href="#sec-2-3">2.3. ruby 環境作り</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1. rbenv/gem/bundler</a>
<ul>
<li><a href="#sec-2-3-1-1">rbenv</a></li>
<li><a href="#sec-2-3-1-2">rubyのインストール</a></li>
<li><a href="#sec-2-3-1-3">gem &#x2013; ruby のパッケージ管理</a></li>
<li><a href="#sec-2-3-1-4">bundler</a></li>
</ul>
</li>
<li><a href="#sec-2-3-2">2.3.2. pry</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4. ruby におけるプログラムの実行のまとめ</a>
<ul>
<li><a href="#sec-2-4-1">2.4.1. プログラム</a>
<ul>
<li><a href="#sec-2-4-1-1">self とクラス</a></li>
<li><a href="#sec-2-4-1-2">リテラル</a></li>
<li><a href="#sec-2-4-1-3">変数</a></li>
<li><a href="#sec-2-4-1-4">メッセージパッシング式</a></li>
<li><a href="#sec-2-4-1-5">メソッドとクラス</a></li>
<li><a href="#sec-2-4-1-6">文と制御</a></li>
<li><a href="#sec-2-4-1-7">スコープの切り替え</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2-5">2.5. rubyあれこれ</a>
<ul>
<li><a href="#sec-2-5-1">2.5.1. オブジェクトとメソッド呼び出し</a></li>
<li><a href="#sec-2-5-2">2.5.2. String.newで起こること</a></li>
<li><a href="#sec-2-5-3">2.5.3. オブジェクトとクラスとモジュール</a>
<ul>
<li><a href="#sec-2-5-3-1">オブジェクト</a></li>
<li><a href="#sec-2-5-3-2">モジュール &lt; オブジェクト</a></li>
<li><a href="#sec-2-5-3-3">クラス &lt; モジュール</a></li>
</ul>
</li>
<li><a href="#sec-2-5-4">2.5.4. クロージャ</a></li>
<li><a href="#sec-2-5-5">2.5.5. フレーム</a></li>
</ul>
</li>
<li><a href="#sec-2-6">2.6. rubyは生産性が高い？</a>
<ul>
<li><a href="#sec-2-6-1">2.6.1. 語彙 メタプログラミング</a>
<ul>
<li><a href="#sec-2-6-1-1">pry</a>
<ul>
<li><a href="#sec-2-6-1-1-1">what is pry?</a></li>
<li><a href="#sec-2-6-1-1-2">Rubyistよ、irbを捨ててPryを使おう</a>
<ul>
<li><a href="#sec-2-6-1-1-2-1">起動</a></li>
<li><a href="#sec-2-6-1-1-2-2">shellとの統合</a></li>
<li><a href="#sec-2-6-1-1-2-3">組み込みコマンド</a></li>
<li><a href="#sec-2-6-1-1-2-4">オブジェクトを調査する</a></li>
<li><a href="#sec-2-6-1-1-2-5">簡易デバッガとして使う</a></li>
</ul>
</li>
<li><a href="#sec-2-6-1-1-3">ドキュメントに素早く参照できる</a>
<ul>
<li><a href="#sec-2-6-1-1-3-1">gemやCの実装も読める</a></li>
</ul>
</li>
<li><a href="#sec-2-6-1-1-4"></a>
<ul>
<li><a href="#sec-2-6-1-1-4-1">ls - change scope</a></li>
<li><a href="#sec-2-6-1-1-4-2">find-method</a></li>
<li><a href="#sec-2-6-1-1-4-3">nesting &#x2013; seeing the nested context</a></li>
<li><a href="#sec-2-6-1-1-4-4">jump-to</a></li>
<li><a href="#sec-2-6-1-1-4-5">switch-to</a></li>
</ul>
</li>
<li><a href="#sec-2-6-1-1-5">今更聞けないpryの使い方と便利プラグイン集</a>
<ul>
<li><a href="#sec-2-6-1-1-5-1">info</a></li>
<li><a href="#sec-2-6-1-1-5-2">最低限の使い方</a>
<ul>
<li><a href="#sec-2-6-1-1-5-2-1">binding.pryで任意の場所からREPLを立ち上げる</a></li>
</ul>
</li>
<li><a href="#sec-2-6-1-1-5-3">pry標準の機能</a>
<ul>
<li><a href="#sec-2-6-1-1-5-3-1">?, show-doc, ri, $, show-method</a></li>
<li><a href="#sec-2-6-1-1-5-3-2">edit</a></li>
<li><a href="#sec-2-6-1-1-5-3-3">cd, ls, Tab補完</a></li>
<li><a href="#sec-2-6-1-1-5-3-4">exit!, !!!, exit-program, disable-pry, edit -m</a></li>
<li><a href="#sec-2-6-1-1-5-3-5">.とshell-mode</a></li>
<li><a href="#sec-2-6-1-1-5-3-6">help</a></li>
</ul>
</li>
<li><a href="#sec-2-6-1-1-5-4">便利なプラグイン (pry関連プラグイン)</a>
<ul>
<li><a href="#sec-2-6-1-1-5-4-1">pry-byebug</a></li>
<li><a href="#sec-2-6-1-1-5-4-2">pry-stack_explorer</a></li>
<li><a href="#sec-2-6-1-1-5-4-3">pry-rails</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-3">3. OO</a>
<ul>
<li><a href="#sec-3-1">3.1. オブジェクト指向に至る軌跡</a>
<ul>
<li><a href="#sec-3-1-1">3.1.1. オブジェクト指向以前</a>
<ul>
<li><a href="#sec-3-1-1-1">Done ソフトウェア危機</a></li>
<li><a href="#sec-3-1-1-2">Done 構造化プログラミング</a>
<ul>
<li>
<ul>
<li><a href="#sec-3-1-1-2-0-1">Todo 構造化プログラミングとは</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-3-1-1-3">Done モジュラプログラミング</a>
<ul>
<li>
<ul>
<li><a href="#sec-3-1-1-3-0-1">凝集度と結合度</a></li>
<li><a href="#sec-3-1-1-3-0-2">悪い結合、良い結合</a></li>
<li><a href="#sec-3-1-1-3-0-3">悪い凝集、良い凝集</a></li>
<li><a href="#sec-3-1-1-3-0-4">状態と副作用の支配</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<p>
<a href="http://masayuki054.github.io/meta-ruby">http://masayuki054.github.io/meta-ruby</a>/
<a href="http://masayuki054.github.io/meta-ruby/lects.html">lects</a>/
<a href="http://masayuki054.github.io/meta-ruby/emacs.html">emacs</a>/
<a href="http://masayuki054.github.io/meta-ruby/ruby.thml">ruby</a>/
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/oo.html">OO へ至る道</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/">講義ドキュメント</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/meta-ruby">meta-ruby まとめ</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/note/">note</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/note/ruby-note.html">ruby-note</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/poker/">poker</a> 
</p>

<p>
<a href="./ruby.html">./ruby.html</a> <a href="./oo.html">./oo.html</a>
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2016-10-03 月&gt;</span></span>の講義予定</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 講義資料の説明</h3>
<div class="outline-text-3" id="text-1-1">
<p>
commented
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> オブジェクト指向入門</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> プログラム言語とは</h4>
<div class="outline-text-4" id="text-1-2-1">
</div><div id="outline-container-sec-1-2-1-1" class="outline-5">
<h5 id="sec-1-2-1-1">記述のための要素</h5>
<div class="outline-text-5" id="text-1-2-1-1">
<ul class="org-ul">
<li>値と定数
</li>
<li>データ構造体
</li>
<li>型と演算
</li>
<li>変数と代入
</li>
<li>文と流れ
</li>
<li>関数（手続き)
<ul class="org-ul">
<li>定義
</li>
<li>呼出し
</li>
</ul>
</li>
<li>スコープ
</li>
<li>モジュール
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-1-2" class="outline-5">
<h5 id="sec-1-2-1-2">実行するということ</h5>
<div class="outline-text-5" id="text-1-2-1-2">
<ul class="org-ul">
<li>コードインタープリタ
</li>
<li>環境
<ul class="org-ul">
<li>実行の流れを保存するスタック
</li>
<li>名前を解決する束縛
</li>
<li>静的か動的か
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-1-3" class="outline-5">
<h5 id="sec-1-2-1-3">メタプログラミング</h5>
<div class="outline-text-5" id="text-1-2-1-3">
<ul class="org-ul">
<li>プログラムを生成するプログラムをつくること
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> WikiPedia.search("オブジェクト指向プログラミング")</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
特徴
</p>
<ul class="org-ul">
<li>情報隠蔽
</li>
<li>多相性
</li>
<li>動的束縛
</li>
<li>継承
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> 僕の考え</h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li>モジュール
</li>
<li>メッセージパッシング
</li>
<li>差をプログラムする
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-4" class="outline-4">
<h4 id="sec-1-2-4"><span class="section-number-4">1.2.4</span> Rubyらしさ</h4>
<div class="outline-text-4" id="text-1-2-4">
<ul class="org-ul">
<li>純粋オブジェクト指向
</li>
<li>プログラム可能なものは全て，オブジェクト
</li>
<li>クラスもオブジェクト
</li>
<li>実行はすべてメッセージパッシングで起こる
</li>
<li>オブジェクトは実行の場
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-5" class="outline-4">
<h4 id="sec-1-2-5"><span class="section-number-4">1.2.5</span> <a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20060825/246409/">まつもと直伝プログラミングの掟</a></h4>
<div class="outline-text-4" id="text-1-2-5">
</div><div id="outline-container-sec-1-2-5-1" class="outline-5">
<h5 id="sec-1-2-5-1">第一回　<a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20050831/220318/?ST=oss">http://itpro.nikkeibp.co.jp/article/COLUMN/20050831/220318/?ST=oss</a></h5>
<div class="outline-text-5" id="text-1-2-5-1">
<p>
<a href="../docs/matz-1-1.html">../docs/matz-1-1.html</a>
<a href="../docs/matz-1-2.html">../docs/matz-1-2.html</a>
<a href="../docs/matz-1-3.html">../docs/matz-1-3.html</a>
</p>

<ul class="org-ul">
<li>多相性 ::　一つの名前が，実行されるコンテキストで，違う意味を持
ち得ること
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-5-2" class="outline-5">
<h5 id="sec-1-2-5-2">第二回，第三回，第四回　ぐらい読みたい</h5>
<div class="outline-text-5" id="text-1-2-5-2">
<ul class="org-ul">
<li><a href="../docs/matz-2.html">../docs/matz-2.html</a> データ抽象と継承
</li>
<li><a href="../docs/matz-3.html">../docs/matz-3.html</a> 多重継承
</li>
<li><a href="../docs/matz-4.html">../docs/matz-4.html</a> ダックタイピング
</li>
</ul>

<p>
C++, Java, Perl, &#x2026; 
</p>


<p>
まとめ
</p>
</div>
</div>


<div id="outline-container-sec-1-2-5-3" class="outline-5">
<h5 id="sec-1-2-5-3">まつもと直伝プログラミングの掟のまとめ</h5>
<div class="outline-text-5" id="text-1-2-5-3">
<p>
<a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/docs/matz">まとめ</a>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Ruby入門</h3>
<div class="outline-text-3" id="text-1-3">
<p>
site: <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta_ruby/ruby_begin.html">http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta_ruby/ruby_begin.html</a>
org:  <a href="file:///users/home/masayuki/COMM/Lects/meta-ruby/git/org/~suzuki/lects/meta-ruby/site/ruby_begin.html">file:///users/home/masayuki/COMM/Lects/meta-ruby/git/org/~suzuki/lects/meta-ruby/site/ruby_begin.html</a>
</p>

<p>
rbenv, gem, bundler
</p>

<p>
gem pry install
</p>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> オブジェクト指向プログラミング Ruby</h3>
<div class="outline-text-3" id="text-1-4">
<p>
<a href="./1.rb">./1.rb</a>
</p>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> メタプログラミング Ruby</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Object Model 
</li>

<li>Method
</li>

<li>Class

<p>
<a href="./l1.rb">./l1.rb</a>
</p>
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> .links</h3>
<div class="outline-text-3" id="text-1-6">
</div><div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> meta-ruby</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li><a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby">コンピュータ科学特論Iサイト</a> self
</li>

<li><a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/">鈴木の講義サイト</a> .super
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> .links</h4>
<div class="outline-text-4" id="text-1-6-2">
<ul class="org-ul">
<li>コンピュータ科学特論I <a href="http://wiki.cis.iwate-u.ac.jp/~wiki/meta-ruby.cgi">講義用Wiki</a> .wiki
</li>

<li><a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects">コンピュータ科学特論Iー講義ノート・メモ</a> .lect
<pre class="example">
~suzuki/lects/meta-ruby/site/docs/lects/     
</pre>
</li>

<li>コンピュータ科学特論I <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/docs/meta-ruby">教科書のまとめ</a> .text
<pre class="example">
path: ~suzuki/lects/meta-ruby/site/org-docs/meta-ruby/
</pre>
</li>

<li>コンピュータ科学特論I <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/docs">関連のドキュメント</a> .docs
<pre class="example">
path: ~suzuki/lects/meta-ruby/site/org-docs/
</pre>
</li>

<li>教科書中のコード .codes
<pre class="example">
path: ~suzuki/lects/meta-ruby/codes/
</pre>
</li>
</ul>
</div>
<div id="outline-container-sec-1-6-2-1" class="outline-5">
<h5 id="sec-1-6-2-1">講義</h5>
<div class="outline-text-5" id="text-1-6-2-1">
</div><div id="outline-container-sec-1-6-2-1-1" class="outline-6">
<h6 id="sec-1-6-2-1-1">主たるねらい</h6>
<div class="outline-text-6" id="text-1-6-2-1-1">
<p>
オブジェクト指向プログラミングの本質，
</p>

<p>
オブジェクト指向システムの仕組み，
</p>

<p>
メタプログラミングの有効性について，
</p>

<p>
オブジェクト指向言語 ruby を用いて考察する
</p>
</div>
</div>


<div id="outline-container-sec-1-6-2-1-2" class="outline-6">
<h6 id="sec-1-6-2-1-2">もうひとつのねらい</h6>
<div class="outline-text-6" id="text-1-6-2-1-2">
<p>
emacs org-mode + babel を使って，
</p>

<p>
文芸的プログラミングをおこないながら，
</p>

<p>
講義しようとたくらんでいますが，
</p>

<p>
いつものとおり，どうなりますことやら。
</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> ruby</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> ruby 情報</h3>
<div class="outline-text-3" id="text-2-1">
</div><div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> ruby の情報</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li><a href="http://magazine.rubyist.net/?0050">Rubyist Magazine - Rubyist Magazine 0050 号</a>
</li>

<li><a href="http://magazine.rubyist.net/?FirstStepRuby">Rubyist Magazine - Ruby の歩き方</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2"><span class="section-number-4">2.1.2</span> manual</h4>
<div class="outline-text-4" id="text-2-1-2">
<ul class="org-ul">
<li><a href="http://docs.ruby-lang.org/ja/2.0.0/doc/index.html">オブジェクト指向スクリプト言語 Ruby リファレンスマニュアル (Ruby 2.0.0)</a>
</li>

<li><a href="http://docs.ruby-lang.org/ja/search/">最速Rubyリファレンスマニュアル検索！ | るりまサーチ</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> ruby入門</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><span class="section-number-4">2.2.1</span> 2016</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
初回に，
<a href="https://www.ruby-lang.org/ja/documentation/quickstart/">20分ではじめるRuby</a>
を先ず読み，やってみましょう。
</p>

<p>
次に，2~3回かけて，<a href="http://www.tohoho-web.com/ruby/">とほほのRuby入門</a> をやり
ましょう。
</p>
</div>
</div>

<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2"><span class="section-number-4">2.2.2</span> 2015</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
<a href="http://libro.tuyano.com/index2?id=953003">ビギナーのためのRubyプログラミング入門</a> をやりましょう
</p>

<ul class="org-ul">
<li><a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/ruby-begin-note.html">ビギナーのためのRubyプログラミング入門のノート</a> ((<a href="file:///users/home/masayuki/COMM/Lects/meta-ruby/git/org/~suzuki/lects/meta-ruby/lects/ruby-begin-note.html">@cis.org</a> <a href="file:///users/home/masayuki/COMM/Lects/meta-ruby/site/lects/ruby-begin-note.html">@s.org</a>))
</li>
</ul>
</div>

<div id="outline-container-sec-2-2-2-1" class="outline-5">
<h5 id="sec-2-2-2-1">内容  <code>[1/10]</code></h5>
<div class="outline-text-5" id="text-2-2-2-1">
<ol class="org-ol">
<li><code>[X]</code> Rubyを使ってみよう!

<ul class="org-ul">
<li><a href="http://docs.ruby-lang.org/ja/2.0.0/doc/spec=2fintro.html">はじめに (Ruby 2.0.0)</a>
</li>
<li><a href="http://docs.ruby-lang.org/ja/2.0.0/doc/spec=2feval.html">Ruby プログラムの実行 (Ruby 2.0.0)</a>
</li>
<li><a href="http://docs.ruby-lang.org/ja/2.0.0/doc/spec=2fcommands.html">コマンド (Ruby 2.0.0)</a>
</li>
<li><a href="http://docs.ruby-lang.org/ja/2.0.0/doc/spec=2frubycmd.html">Rubyの起動 (Ruby 2.0.0)</a>
</li>
</ul>
<p>
まずは、Rubyをインストールして利用できるようにしてみましょう。そし
て実際にRubyのスクリプトを動かすところまでやってみましょう。
</p>
</li>

<li><code>[&#xa0;]</code> 基本的な構文を覚えよう <a href="http://docs.ruby-lang.org/ja/2.0.0/doc/spec=2fcontrol.html">制御構造 (Ruby 2.0.0)</a>

<p>
プログラミング言語には、プログラムの流れを制御するための構文が用意
されています。基本的な構文の使い方をまとめて覚えましょう。
</p>
</li>

<li><code>[&#xa0;]</code> <a href="http://libro.tuyano.com/index3?id=959004">配列とハッシュ:ビギナーのためのRubyプログラミング入門</a>  

<p>
多数の値をまとめて管理するのが「配列」です。この配列の値を名前で管
理できるようにしたものが「ハッシュ（連想配列）」です。これらの基本
的な使い方について説明します。
</p>
</li>

<li><code>[&#xa0;]</code> 構造化からオブジェクトへ！

<p>
Rubyでは、スクリプトを整理し、構造的にまとめていくための仕組みが用
意されています。これは、突き詰めれば、プログラムを「オブジェクト」
というものとして作成する考え方へとつながっていきます。この「オブジェ
クト」に至るまでの考え方についてここで説明していきましょう。
</p>
</li>

<li><code>[&#xa0;]</code> オブジェクトを更に極める！

<p>
オブジェクトというものの働きや使い方を知ることは、Rubyを使い込んで
いくためには避けて通れない道です。今回も更にオブジェクトというもの
について説明を続けて行きましょう。今回のキーワードは「アクセサ」
「クラスメソッド」「継承」といったものです。
</p>
</li>

<li><code>[&#xa0;]</code> 日時とTimeクラス

<p>
日時を扱うために用意されているのが「Time」というクラスです。このク
ラスには、日時の表現はもちろん、日時を使った計算やさまざまなフォー
マットによる出力などのメソッドが一通り揃っています。これらの基本的
な使い方についてマスターしましょう。
</p>
</li>

<li><code>[&#xa0;]</code> テキスト（Stringクラス）の基本操作

<p>
テキストの値を扱う「String」クラスには、テキスト操作のためのさまざ
まなメソッドが用意されています。それらの中から主なものをピックアッ
プして使い方を説明しましょう。
</p>
</li>

<li><code>[&#xa0;]</code> テキストファイルのアクセス

<p>
Rubyでは、テキストファイルに簡単にアクセスすることができます。テキ
ストファイル利用の基本を覚えて、データの読み書きの基本について説明
をしましょう。
</p>
</li>

<li><code>[&#xa0;]</code> CSVファイル・アクセス

<p>
CSVファイルは、データベースなどの多数の値からなるデータを保存するの
に用いられるテキストファイルです。Rubyには、これを利用するための専
用機能がいろいろと用意されています。CSVの利用をマスターしてデータ管
理を行いましょう。
</p>
</li>

<li><code>[&#xa0;]</code> ERBによるWebアプリケーション開発

<p>
Rubyには「ERB」と呼ばれる、HTMLの中にRubyのスクリプトを埋め込んで実
 行する技術があります。これを使えば、簡単にRubyを使ったWebアプリケー
 ションが作れるのです。その基本的な使い方を覚えましょう。
</p>
</li>
</ol>
</div>
</div>
</div>






<div id="outline-container-sec-2-2-3" class="outline-4">
<h4 id="sec-2-2-3"><span class="section-number-4">2.2.3</span> その他の入門</h4>
<div class="outline-text-4" id="text-2-2-3">
<p>
てっとり早く全貌を掴むには，
</p>
<ul class="org-ul">
<li><a href="http://loveruby.net/ja/rhg/book/minimum.html">RHG「第1章 Ruby言語ミニマム</a>
</li>
</ul>

<p>
プログラミングしながら
</p>

<ul class="org-ul">
<li><a href="http://www.minituku.net/courses/1049510743/lessons/763190848/drills/282479059?locale=ja">ミニツク - Rubyのe-ラーニング研修システム</a>
</li>
<li><a href="http://dotinstall.com/lessons/basic_ruby_v2">Ruby入門 (全23回) - プログラミングならドットインストール</a>
     一話2〜3分でまあ聴きやすい
</li>
<li>rubymonk
</li>
<li>若手エンジニア／初心者のためのRuby 2.1入門 最新記事一覧 - ITmedia Keywords
<a href="http://www.atmarkit.co.jp/ait/kw/ruby_nyumon.html">http://www.atmarkit.co.jp/ait/kw/ruby_nyumon.html</a>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> ruby 環境作り</h3>
<div class="outline-text-3" id="text-2-3">
<p>
自分用の ruby の環境を作りましょう。
</p>

<p>
ruby のための emacs の設定については，<a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/emacs-setup.html">emacsの設定</a> ((<a href="file:///users/home/masayuki/COMM/Lects/meta-ruby/git/org/~suzuki/lects/meta-ruby/org-docs/emacs-setup.html">@cis.org</a> <a href="file:///users/home/masayuki/COMM/Lects/meta-ruby/site/org-docs/emacs-setup.html">@s.org</a>))
</p>
</div>

<div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> rbenv/gem/bundler</h4>
<div class="outline-text-4" id="text-2-3-1">
</div><div id="outline-container-sec-2-3-1-1" class="outline-5">
<h5 id="sec-2-3-1-1">rbenv</h5>
<div class="outline-text-5" id="text-2-3-1-1">
<p>
<a href="http://d.hatena.ne.jp/zariganitosh/20141101/what_does_rbenv">rbenvは何をしているのか？ - ザリガニが見ていた&#x2026;。</a>
</p>

<ul class="org-ul">
<li>個人毎に用意できる ruby の環境 
</li>
<li>~/.rbenv/ の配下にバージョンごとに
</li>
<li>~/.rbenv/shims/ の配下にえらんだバージョンのバイナリへのリンクが
ある
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-3-1-2" class="outline-5">
<h5 id="sec-2-3-1-2">rubyのインストール</h5>
<div class="outline-text-5" id="text-2-3-1-2">
<p>
<a href="http://www.task-notes.com/entry/20140707/1404744444">Ruby開発環境の準備+rbenvの使い方 - TASK NOTES</a>
</p>
<ul class="org-ul">
<li>前半はMacOSX用の記述ですが，rbenvインストール後は，そのまま使え
ます。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh"># [~/]
rbenv install --list  # インストール可な ruby を表示
</pre>
</div>

<p>
最新の安定版を入れましょう:
</p>

<div class="org-src-container">

<pre class="src src-sh">rbenv install 2.3-dev #
rbenv global 2.3-dev  # 
rbenv init            # シェルの設定
</pre>
</div>

<p>
インストールされたことを確かめましょう:
</p>

<div class="org-src-container">

<pre class="src src-sh">which ruby # ruby インタプリター
which gem  # ruby パッケージ管理コマンド
which irb  # 対話型 ruby インタプリター
</pre>
</div>

<p>
.bashrc に下記のコマンドを付け加えましょう:
</p>

<div class="org-src-container">

<pre class="src src-sh">eval "$(rbenv init -)"
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-1-3" class="outline-5">
<h5 id="sec-2-3-1-3">gem &#x2013; ruby のパッケージ管理</h5>
<div class="outline-text-5" id="text-2-3-1-3">
<p>
<a href="http://allabout.co.jp/gm/gc/439246/3/">RubyGems (gem) の使い方・インストール方法</a>
</p>

<p>
gemを使ってパッケージをいれてみましょう:
</p>

<div class="org-src-container">

<pre class="src src-sh">gem install pry
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-1-4" class="outline-5">
<h5 id="sec-2-3-1-4">bundler</h5>
<div class="outline-text-5" id="text-2-3-1-4">
<p>
この講義では使いませんが，一応紹介です:
</p>
<ul class="org-ul">
<li><a href="http://blog.tokoyax.com/entry/ruby/bundler">Ruby の gem をプロジェクト毎に Bundler で管理する - fugafuga.write()</a>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><span class="section-number-4">2.3.2</span> pry</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
pry は irb に替わる対話型インタプリタです。デバッガとして使えます。
</p>

<ul class="org-ul">
<li>Ruby - 今更聞けないpryの使い方と便利プラグイン集 - Qiita
<a href="http://qiita.com/k0kubun/items/b118e9ccaef8707c4d9f">http://qiita.com/k0kubun/items/b118e9ccaef8707c4d9f</a>
</li>

<li>第3回　Pry ～IRBをより見やすく、より便利に～
<a href="http://www.school.ctc-g.co.jp/columns/masuidrive/masuidrive03.html">http://www.school.ctc-g.co.jp/columns/masuidrive/masuidrive03.html</a>
</li>

<li>Rubyistよ、irbを捨ててPryを使おう - TIM Labs
<a href="http://labs.timedia.co.jp/2011/12/rubyist-should-use-pry.html">http://labs.timedia.co.jp/2011/12/rubyist-should-use-pry.html</a>
</li>

<li>Emacs×Ruby - PryをEmacsで使ってみる - <a href="http://rubikitch.com/%E3%81%AB%E7%A7%BB%E8%BB%A2%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F">http://rubikitch.com/%E3%81%AB%E7%A7%BB%E8%BB%A2%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F</a>
      <a href="http://d.hatena.ne.jp/rubikitch/20140627/pry">http://d.hatena.ne.jp/rubikitch/20140627/pry</a>

<ul class="org-ul">
<li>emacs で run-ruby で pry が動きだし，いろいろ便利に使えます。
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> ruby におけるプログラムの実行のまとめ</h3>
<div class="outline-text-3" id="text-2-4">
</div><div id="outline-container-sec-2-4-1" class="outline-4">
<h4 id="sec-2-4-1"><span class="section-number-4">2.4.1</span> プログラム</h4>
<div class="outline-text-4" id="text-2-4-1">
</div><div id="outline-container-sec-2-4-1-1" class="outline-5">
<h5 id="sec-2-4-1-1">self とクラス</h5>
<div class="outline-text-5" id="text-2-4-1-1">
<ul class="org-ul">
<li>自分 (self) は，あるクラスから生まれたオブジェクトである
</li>
<li>自分 (self) は，コード (ブロック) を実行する
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-4-1-2" class="outline-5">
<h5 id="sec-2-4-1-2">リテラル</h5>
<div class="outline-text-5" id="text-2-4-1-2">
<p>
オブジェクトを表す文字列．そのオブジェクトが評価値．
</p>
</div>
</div>

<div id="outline-container-sec-2-4-1-3" class="outline-5">
<h5 id="sec-2-4-1-3">変数</h5>
<div class="outline-text-5" id="text-2-4-1-3">
<p>
オブジェクトの名前，
束縛を持ち，その値が評価値
</p>

<ul class="org-ul">
<li>ブロックが持つブロックローカル変数
</li>
<li>オブジェクトがもつインスタンス変数
</li>
<li>クラスが持つクラス変数，定数
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-4-1-4" class="outline-5">
<h5 id="sec-2-4-1-4">メッセージパッシング式</h5>
<div class="outline-text-5" id="text-2-4-1-4">
<p>
obj.msg(*args)
</p>
<ul class="org-ul">
<li>オブジェクト obj に文字列 msg とオブジェクト列を(引数として)渡す
</li>
<li>msg は操作を表し、その意味は obj によって決まる
</li>
<li>obj が組み込みオブジェクトになると計算され結果のオブジェクトとな
る
</li>
<li>評価値は上記を再帰的に行うことで計算される
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-4-1-5" class="outline-5">
<h5 id="sec-2-4-1-5">メソッドとクラス</h5>
<div class="outline-text-5" id="text-2-4-1-5">
<p>
メソッドはクラスに属し，
クラスは継承でき，
継承したクラスのメソッドも利用できる
</p>
</div>
</div>

<div id="outline-container-sec-2-4-1-6" class="outline-5">
<h5 id="sec-2-4-1-6">文と制御</h5>
</div>


<div id="outline-container-sec-2-4-1-7" class="outline-5">
<h5 id="sec-2-4-1-7">スコープの切り替え</h5>
<div class="outline-text-5" id="text-2-4-1-7">
<pre class="example">
class C end
def m() end
{ ... } 
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> rubyあれこれ</h3>
<div class="outline-text-3" id="text-2-5">
</div><div id="outline-container-sec-2-5-1" class="outline-4">
<h4 id="sec-2-5-1"><span class="section-number-4">2.5.1</span> オブジェクトとメソッド呼び出し</h4>
<div class="outline-text-4" id="text-2-5-1">
<p>
メソッド呼び出しができるのは実体 (<b>オブジェクト</b>)中のブロック
</p>

<p>
オブジェクト中の実行の場 (ブロック) は二ヶ所
</p>
<ul class="org-ul">
<li>self のトップレベルブロック
</li>
<li>実行中のメソッドブロック
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-5-2" class="outline-4">
<h4 id="sec-2-5-2"><span class="section-number-4">2.5.2</span> String.newで起こること</h4>
<div class="outline-text-4" id="text-2-5-2">
<p>
Class
</p>
<ul class="org-ul">
<li>Class オブジェクトだけは，オブジェクトを生み出せる (特異) new メソッドをもつ
</li>
<li>Class オブジェクトは，継承できる
</li>
<li>Class オブジェクトを，継承したオブジェクトをクラスとする
</li>
<li>Class はクラスである
</li>
</ul>

<p>
String は Class を継承して生まれているので，new メソッドが実行できる
</p>

<p>
String オブジェクトが new を実行する
</p>
<ul class="org-ul">
<li>String クラスのインスタンスを生成し，selfとする
</li>
<li>self.initialize を実行する
</li>
<li>self を返す
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-5-3" class="outline-4">
<h4 id="sec-2-5-3"><span class="section-number-4">2.5.3</span> オブジェクトとクラスとモジュール</h4>
<div class="outline-text-4" id="text-2-5-3">
</div><div id="outline-container-sec-2-5-3-1" class="outline-5">
<h5 id="sec-2-5-3-1">オブジェクト</h5>
<div class="outline-text-5" id="text-2-5-3-1">
<ul class="org-ul">
<li>メッセージのレシーバとなり，メソッドの実行ができる
</li>
<li>独自の状態を持てる
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-5-3-2" class="outline-5">
<h5 id="sec-2-5-3-2">モジュール &lt; オブジェクト</h5>
<div class="outline-text-5" id="text-2-5-3-2">
<ul class="org-ul">
<li>独自の名前空間を持つ 名前の定義
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-5-3-3" class="outline-5">
<h5 id="sec-2-5-3-3">クラス &lt; モジュール</h5>
<div class="outline-text-5" id="text-2-5-3-3">
<ul class="org-ul">
<li>オブジェクトの性質を継承 (レシーバ)
</li>
<li>モジュールの性質を継承 (名前空間)
</li>
<li>クラスに特有なメソッドを持つ (オブジェクトの生成，子クラスの生成)
</li>
</ul>

<p>
[1,2,3].each { return 1} 
</p>

<p>
[1,2,3].each { break }
</p>

<p>
def m
  [1,2,3].each { return 1} 
end
</p>

<p>
def m 
  [1,2,3].each { break }
end
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-5-4" class="outline-4">
<h4 id="sec-2-5-4"><span class="section-number-4">2.5.4</span> クロージャ</h4>
<div class="outline-text-4" id="text-2-5-4">
<dl class="org-dl">
<dt> クロージャ </dt><dd>コードと環境の組み
<dl class="org-dl">
<dt> コード </dt><dd>名前を使った一連の操作
</dd>
<dt> 環境 </dt><dd>名前に対して値を与える
</dd>
<dt> 名前 </dt><dd>メソッド名，局所変数，インスタンス変数、クラス変数、グ
ローバル変数, 定数
</dd>
</dl>
</dd>
</dl>

<p>
self, class, module構造 はクロージャには閉じこめられない？
</p>
</div>
</div>

<div id="outline-container-sec-2-5-5" class="outline-4">
<h4 id="sec-2-5-5"><span class="section-number-4">2.5.5</span> フレーム</h4>
<div class="outline-text-4" id="text-2-5-5">
<ul class="org-ul">
<li>メソッド呼び出しを実行する環境
</li>
<li>ブロックはフレーム内で実行される（と思う）
</li>
<li>Procとlambda で，違うのは所属するフレーム
</li>
</ul>
</div>
</div>
</div>



<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> rubyは生産性が高い？</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>ruby を仕事で使おう <a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20060921/248715/">http://itpro.nikkeibp.co.jp/article/COLUMN/20060921/248715/</a>
</li>

<li>上記記事への批評
<a href="http://d.hatena.ne.jp/fromdusktildawn/20061002/1159784863">http://d.hatena.ne.jp/fromdusktildawn/20061002/1159784863</a>

<p>
上記記事への ((s-:)) の考え
</p>

<ul class="org-ul">
<li>できるかどうかじゃなくて，そのやり方の「抽象化」が問題なんだよ
ね．原則が問題となる．原則がメタのやり方の源．
</li>

<li>Scheme なら原則はシンプルで，何でもできる．が，自由すぎるのが問題
視される．僕は好きだけど．
</li>

<li>Ruby の原則もシンプル．オブジェクト指向の枠組みの中で自由さが得
られる純粋で少ない原則を持つ．
</li>

<li>Scheme のRS で言っている，少ない原則で無限の拡張性を得ること．
それがメタプログラミングの原則．
</li>

<li>メタプログラミングのやり方は，言語の原則で決まる．
じゃ，メタメタプログラミングは？ リフレクティブな手法のすべては，
結局言語の原則に依る．
</li>

<li>手続き型言語で最もシンプルな原則の言語は，Scheme.
</li>

<li>手続き型言語にオブジェクト指向原則を入れて最もシンプルな原則を
持つ言語が，Ruby. (だと信じている）
</li>

<li>ちょっと毛色が変わるけど，実行プロセスが扱えるかと言うのもメタで
本質的．対象とできるかということ．言語レベルとは違うメタレベルを
手に入れられる．

<p>
これに関しては，Scheme が最もシンプルでキレイ．
</p>

<p>
Ruby はオブジェクト指向の枠組みで，最もシンプルでキレイ（と信ず
る）．
</p>
</li>
</ul>
</li>

<li>IPA java
<a href="http://www.ipa.go.jp/software/open/ossc/download/Model_Curriculum_E1_Guidance_4_1_1.pdf">http://www.ipa.go.jp/software/open/ossc/download/Model_Curriculum_E1_Guidance_4_1_1.pdf</a> 
</li>
</ul>
</div>

<div id="outline-container-sec-2-6-1" class="outline-4">
<h4 id="sec-2-6-1"><span class="section-number-4">2.6.1</span> 語彙 メタプログラミング</h4>
<div class="outline-text-4" id="text-2-6-1">
<ul class="org-ul">
<li><a href="http://ja.wikipedia.org/wiki/%E3%83%A1%E3%82%BF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0">http://ja.wikipedia.org/wiki/%E3%83%A1%E3%82%BF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0</a>
</li>
<li>メタプログラミングの光と影 <a href="http://d.hatena.ne.jp/higayasuo/20090208/1234058491">http://d.hatena.ne.jp/higayasuo/20090208/1234058491</a>
</li>
</ul>
</div>
<div id="outline-container-sec-2-6-1-1" class="outline-5">
<h5 id="sec-2-6-1-1">pry</h5>
<div class="outline-text-5" id="text-2-6-1-1">
</div><div id="outline-container-sec-2-6-1-1-1" class="outline-6">
<h6 id="sec-2-6-1-1-1">what is pry?</h6>
<div class="outline-text-6" id="text-2-6-1-1-1">
<dl class="org-dl">
<dt> what </dt><dd>irbの代替，デバッグ
</dd>
<dt> links </dt><dd><ul class="org-ul">
<li><a href="http://labs.timedia.co.jp/2011/12/rubyist-should-use-pry.html">Rubyistよ、irbを捨ててPryを使おう - TIM Labs</a>
</li>
<li><a href="https://github.com/pry/pry/wiki">pry Wiki</a>
</li>
<li><a href="http://railscasts.com/episodes/280-pry-with-rails">#280 Pry with Rails - RailsCasts</a>
</li>
</ul>
</dd>
</dl>
</div>
</div>


<div id="outline-container-sec-2-6-1-1-2" class="outline-6">
<h6 id="sec-2-6-1-1-2">Rubyistよ、irbを捨ててPryを使おう</h6>
<div class="outline-text-6" id="text-2-6-1-1-2">
<p>
<a href="http://labs.timedia.co.jp/2011/12/rubyist-should-use-pry.html">http://labs.timedia.co.jp/2011/12/rubyist-should-use-pry.html</a>
</p>
</div>
<div id="outline-container-sec-2-6-1-1-2-1" class="outline-7">
<h7 id="sec-2-6-1-1-2-1">起動</h7>
<div class="outline-text-7" id="text-2-6-1-1-2-1">
<pre class="example">
$ pry
[1] pry(main)&gt;
[2] pry(main)&gt; -&gt;n{ i=0;j=1;n.times{j=i+i=j};i }.call(10)
=&gt; 55
[3] pry(main)&gt; def foo
[3] pry(main)*   ^
</pre>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-2-2" class="outline-7">
<h7 id="sec-2-6-1-1-2-2">shellとの統合</h7>
<div class="outline-text-7" id="text-2-6-1-1-2-2">
<p>
Pryはshellと統合し、shellのコマンドをPryコンソール上で実行できます。
ただ、コマンドの前に'.'を付けて実行します。
</p>

<pre class="example">
[1] pry(main)&gt; .ls
[2] pry(main)&gt; .pwd
[3] pry(main)&gt; .git log --pretty=oneline
[4] pry(main)&gt; x = "class Hoge"
[5] pry(main)&gt; .find . -name "*.rb" | xargs grep #{x}
</pre>

<p>
組み込みコマンドのshell-modeを使うと、
</p>
<ul class="org-ul">
<li>プロンプトにカレントディレクトリが表示され、
</li>
<li>tabキーでディレクトリ名を補完できるようになり、
</li>
<li>よりファイル操作が簡単になります。
</li>
</ul>

<pre class="example">
[6] pry(main)&gt; shell-mode
pry main:/Users/yoppi $ shell-mode
[8] pry(main)&gt;
</pre>

<p>
shell-modeを抜けるには、再度shell-modeコマンドを実行します。
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-2-3" class="outline-7">
<h7 id="sec-2-6-1-1-2-3">組み込みコマンド</h7>
<div class="outline-text-7" id="text-2-6-1-1-2-3">
<pre class="example">
[1] pry(main)&gt; help
</pre>

<p>
以下に便利な組み込みコマンドの一部を紹介します。
</p>

<dl class="org-dl">
<dt> hist </dt><dd>Pryコンソールで評価した過去の式の一覧を確認できます
</dd>
<dt> ls </dt><dd>現在のフレームで有効なオブジェクトを表示します。'デバッガとして使う'で詳しく紹介します
</dd>
<dt> gem-install、gem-list </dt><dd>Pryコンソール上でgemをインストールしたり、gemの一覧を確認できます
</dd>
<dt> gist-method </dt><dd>gemのgistをさらにラップしたものが使えます
</dd>
<dt> shell-mode </dt><dd>Pryからシームレスにファイルにアクセスでき、Pryからファイルを操作したい場合はshell-modeになると便利です
</dd>
<dt> ! </dt><dd>Pryで評価しているフレームをリセットします
</dd>
<dt> ri </dt><dd>riコマンドをPry上で実行します
</dd>
<dt> show-doc </dt><dd>対象メソッドのドキュメントを表示します
</dd>
<dt> show-method </dt><dd>対象メソッドの実装表示します
</dd>
</dl>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-2-4" class="outline-7">
<h7 id="sec-2-6-1-1-2-4">オブジェクトを調査する</h7>
<div class="outline-text-7" id="text-2-6-1-1-2-4">
<p>
Pry独自の概念として、オブジェクト間を移動できます。 デバッガのフレー
ムに似ています。 lsコマンドで現在のオブジェクトの一覧を表示し、cdコ
マンドでそのオブジェクトに移動できます。
</p>

<pre class="example">
[1] pry(main)&gt; a = "foo"
[2] pry(main)&gt; ls
locals: _  _dir_  _ex_  _file_  _in_  _out_  _pry_  a  version
[3] pry(main)&gt; cd a
[4] pry("foo"):1&gt; nesting
Nesting status:
--
0. main (Pry top level)
1. "foo"
[5] pry("foo"):1&gt; ls
Comparable methods: &lt; &lt;= &gt; &gt;= between?
String methods: ... 
[6] pry("foo"):1&gt; upcase
=&gt; "FOO"
</pre>

<p>
深くネストしたオブジェクトの調査もcdして潜っていける
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-2-5" class="outline-7">
<h7 id="sec-2-6-1-1-2-5">簡易デバッガとして使う</h7>
<div class="outline-text-7" id="text-2-6-1-1-2-5">
<p>
適当な箇所に次のコードを差し込みましょう。
</p>

<pre class="example">
binding.pry
binding.pry if expression
</pre>

<p>
ここがブレークポイントになり、Pryコンソールが立ち上がりま
す。 
</p>

<p>
停止した時点で評価されたオブジェクトにアクセスできるので、デバッグを
自由に進められます。 ステップ実行したければ、binding.pryを停止させた
い箇所に埋め込みましょう。 
</p>

<p>
普通のRubyアプリケーションであれば、edit-methodコマンドで現在のメソッ
ド名を指定することでそのメソッドを編集でき、また、直接エディタで編集
した場合reload-methodで読み込みなおすとstep実行できます。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-3" class="outline-6">
<h6 id="sec-2-6-1-1-3">ドキュメントに素早く参照できる</h6>
<div class="outline-text-6" id="text-2-6-1-1-3">
<p>
show-method、stat等のコマンドが用意されています。 また、シェル経由で
riコマンドをそのまま使用できます。 VimやEmacs使い達は、それぞれのエ
ディタ上で素早くドキュメントを牽けるようにしているはずですが、irbで
作業しているときには牽けません。 Pryではこれらの組み込みコマンドが提
供されていることで、素早くドキュメントにアクセスできます
</p>

<pre class="example">
[1] pry(main)&gt; ri Array#sample
[2] pry(main)&gt; require 'pathname'
[3] pry(main)&gt; show-doc Pathname#children
</pre>
</div>


<div id="outline-container-sec-2-6-1-1-3-1" class="outline-7">
<h7 id="sec-2-6-1-1-3-1">gemやCの実装も読める</h7>
<div class="outline-text-7" id="text-2-6-1-1-3-1">
<p>
さて、Rubyのオブジェクトに対してメソッドを呼び出すわけですが、そのオ
ブジェクトがどう実装されているか気になるときがあります。 特に、gemラ
イブラリを使っているときに、APIがどんなことをしているのか素早く知り
たいわけです。
</p>

<pre class="example">
[4] pry(main)&gt; require 'nokogiri'
[5] pry(main)&gt; show-method Nokogiri::HTML::Document.parse
From: /Users/yoppi/opt/local/ruby/ruby-1.9.3-p0/lib/ruby/gems/1.9.1/gems/nokogiri-1.4.4/lib/nokogiri/html/document.rb @ line 64:
Number of lines: 22
Owner: #&lt;Class:Nokogiri::HTML::Document&gt;
Visibility: public

def parse string_or_io, url = nil, encoding = nil, options = XML::ParseOptions::DEFAULT_HTML
...
</pre>

<p>
また、Rubyの組み込みライブラリはCで実装されています。 よくRubyiest達
はCで実装しているコードを眺めて、実装を楽しんだり、もっと改善できる
ところはなかな? と考えるときがあります。 Pryなら簡単に該当する組み込
みライブラリのCのコードを読めます。 Cのコードを読むには、pry-docをイ
ンストールしておく必要があります。 たとえば、Array#sampleは同様に
</p>

<pre class="example">
[6] pry(main)&gt; show-method Array#sample
static VALUE
rb_ary_sample(int argc, VALUE *argv, VALUE ary)
{
    VALUE nv, result, *ptr;
    long n, len, i, j, k, idx[10];
...
</pre>

<p>
と、show-methodコマンドで牽くだけです。 これでC実装を素早く読めるの
で今まで実装を読まなかった人も読むようになり、Rubyの開発も活発になり
そうです。 大変便利ですね。
</p>
</div>
</div>
</div>


<div id="outline-container-sec-2-6-1-1-4" class="outline-6">
<h6 id="sec-2-6-1-1-4"><a href="https://github.com/pry/pry">https://github.com/pry/pry</a></h6>
<div class="outline-text-6" id="text-2-6-1-1-4">
</div><div id="outline-container-sec-2-6-1-1-4-1" class="outline-7">
<h7 id="sec-2-6-1-1-4-1">ls - change scope</h7>
<div class="outline-text-7" id="text-2-6-1-1-4-1">
<pre class="example">
ls [-m|-M|-p|-pM] [-q|-v] [-c|-i] [Object]
ls [-g] [-l]
</pre>

<pre class="example">
-m, --methods        Show public methods defined on the Object (default)
-M, --module         Show methods defined in a Module or Class
-p, --ppp            Show public, protected (in yellow) and private (in green) methods
-q, --quiet          Show only methods defined on object.singleton_class and object.class
-v, --verbose        Show methods and constants on all super-classes (ignores Pry.config.ls.ceiling)
-g, --globals        Show global variables, including those builtin to Ruby (in cyan)
-l, --locals         Show locals, including those provided by Pry (in red)
-c, --constants      Show constants, highlighting classes (in blue), and exceptions (in purple)
-i, --ivars          Show instance variables (in blue) and class variables (in bright blue)
-G, --grep           Filter output by regular expression
-h, --help           Show help
</pre>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-4-2" class="outline-7">
<h7 id="sec-2-6-1-1-4-2">find-method</h7>
</div>
<div id="outline-container-sec-2-6-1-1-4-3" class="outline-7">
<h7 id="sec-2-6-1-1-4-3">nesting &#x2013; seeing the nested context</h7>
</div>
<div id="outline-container-sec-2-6-1-1-4-4" class="outline-7">
<h7 id="sec-2-6-1-1-4-4">jump-to</h7>
</div>

<div id="outline-container-sec-2-6-1-1-4-5" class="outline-7">
<h7 id="sec-2-6-1-1-4-5">switch-to</h7>
</div>
</div>


<div id="outline-container-sec-2-6-1-1-5" class="outline-6">
<h6 id="sec-2-6-1-1-5">今更聞けないpryの使い方と便利プラグイン集</h6>
<div class="outline-text-6" id="text-2-6-1-1-5">
</div><div id="outline-container-sec-2-6-1-1-5-1" class="outline-7">
<h7 id="sec-2-6-1-1-5-1">info</h7>
<div class="outline-text-7" id="text-2-6-1-1-5-1">
<p>
site: <a href="http://qiita.com/k0kubun/items/b118e9ccaef8707c4d9f">Ruby - 今更聞けないpryの使い方と便利プラグイン集 - Qiita</a>
</p>

<p>
linked_from: <a href="http://qiita.com/tags/pry">pryに関する73件の投稿 - Qiita</a>
</p>

<ul class="org-ul">
<li>pryが何であるかが書かれていない

<p>
Ruby のデバッガ  
</p>
</li>
</ul>

<p>
meta-ruby講義での，pryの実践的な紹介のため
</p>
</div>
</div>


<div id="outline-container-sec-2-6-1-1-5-2" class="outline-7">
<h7 id="sec-2-6-1-1-5-2">最低限の使い方</h7>
<div class="outline-text-7" id="text-2-6-1-1-5-2">
<p>
まだpryを使ったことがない人はこれだけ知ってれば十分な気がする。
</p>
</div>

<div id="outline-container-sec-2-6-1-1-5-2-1" class="outline-8">
<h8 id="sec-2-6-1-1-5-2-1">binding.pryで任意の場所からREPLを立ち上げる</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-2-1">
<p>
ソースの任意の箇所にbinding.pryを書いてRubyのプログラムを走らせると、実行中にその行でストップしてpryのREPLが立
ち上がり、その環境での変数がどうなっているかなどが参照できる。
アプリが原因不明のエラーを出している時、落ちている直前にbinding.pryを挟んで原因を調査したり、テストが落ちている原
因の特定などに便利。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-3" class="outline-7">
<h7 id="sec-2-6-1-1-5-3">pry標準の機能</h7>
<div class="outline-text-7" id="text-2-6-1-1-5-3">
<p>
pryの便利な機能をよく使いそうな順に紹介する。
</p>
</div>

<div id="outline-container-sec-2-6-1-1-5-3-1" class="outline-8">
<h8 id="sec-2-6-1-1-5-3-1">?, show-doc, ri, $, show-method</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-3-1">
<p>
?やshow-docを使うとドキュメントやソースコードを見ることができる。
</p>

<p>
riはriコマンドを実行する。
</p>

<p>
$やshow-methodを使うとメソッドの定義を見ることができる。
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-3-2" class="outline-8">
<h8 id="sec-2-6-1-1-5-3-2">edit</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-3-2">
<p>
今はまだどこにソースがあるかがわからないところにbinding.pryを貼りたいことがある。
editを使うとpryで定義場所を調べたあとエディタでそれを開くみたいなコストが減らせる。
あとは周辺をそのまま読みたいときにも便利。
</p>

<p>
エディタは$EDITORをいじるか.pryrcにPry.editor = 'vim'とか書けば変えられる。
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-3-3" class="outline-8">
<h8 id="sec-2-6-1-1-5-3-3">cd, ls, Tab補完</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-3-3">
<p>
pryも普通のシェルと同じようにcd, lsやタブキーによる補完がある。
cdを使うとコンテキストを移動できる。上の画像ではmainからAcitveRecord::RelationやArelの内側に入っている。
</p>

<p>
lsは現在のコンテキストにおけるメソッドや変数の一覧が見れる。
メソッドの一覧だけ見たいときはls -m。ls &#x2013;grepで絞込ができる。
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-3-4" class="outline-8">
<h8 id="sec-2-6-1-1-5-3-4">exit!, !!!, exit-program, disable-pry, edit -m</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-3-4">
<p>
何度も呼ばれるメソッドやループの内側にbinding.pryを書いて何度もブレークして困った事がある人は多いと思う。
一番楽で乱暴な方法はexit!, !!!, exit-programでプロセスを終了してしまうことである。でもこれだと例えばrails s上でやると
rails sが落ちる。
disable-pryは以降pryが完全に無効になるのでプロセスは死なないけど、以降binding.pryが使えなくなる。
</p>

<p>
多分一番健全な方法は、ちょっと面倒だけどedit -mで現在のメソッドからbinding.pryを取り除くことだと思う。
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-3-5" class="outline-8">
<h8 id="sec-2-6-1-1-5-3-5">.とshell-mode</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-3-5">
<p>
「.」で始めると以降をシェルのコマンド入力として受け付ける。画像のように#{}の式展開が使える。
shell-modeを使うとカレントディレクトリを表示してくれるのと、ファイル名補完が有効になる。
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-3-6" class="outline-8">
<h8 id="sec-2-6-1-1-5-3-6">help</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-3-6">
<p>
単にRubyの式を評価するだけでなく、pryには独自のコマンドが存在する。その全リストをhelpコマンドで確認することがで
きる。
セクションごとに分けて表示してくれるので、例えばpry-railsプラグイン特有の機能のリストを見たいときなどに役に立つ。
</p>

<p>
各コマンドは-h(&#x2013;help)をつけると使い方を見ることができる。
余力がある人はhist, find-method, whereami(@), nesting あたりは見ておくと良いと思う。
</p>
</div>
</div>
</div>


<div id="outline-container-sec-2-6-1-1-5-4" class="outline-7">
<h7 id="sec-2-6-1-1-5-4">便利なプラグイン (<a href="https://rubygems.org/search?utf8=%E2%9C%93&query=pry-">pry関連プラグイン</a>)</h7>
<div class="outline-text-7" id="text-2-6-1-1-5-4">
<p>
個人的には以下の3つだけ知ってれば十分だと思う
</p>
</div>

<div id="outline-container-sec-2-6-1-1-5-4-1" class="outline-8">
<h8 id="sec-2-6-1-1-5-4-1">pry-byebug</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-4-1">
<p>
古代のRuby向けに作られたpry-navとpry-debuggerの後継がpry-byebug。
ステップ実行など、デバッガとしてちゃんとpryを使いたい場合はこれが必要になる。
</p>

<p>
以下のコマンドだけ覚えておけば良い。
</p>

<p>
コマンド  操作    
step  メソッドの内部に入る    
next  現在のメソッド内で1行進める    
finish  現在のメソッドを抜ける    
continue  デバッグを抜ける    
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-4-2" class="outline-8">
<h8 id="sec-2-6-1-1-5-4-2">pry-stack_explorer</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-4-2">
<p>
show-stackしてスタックのリストを出しframe [数字]とやると任意のスタックにコンテキストを移動できる。
</p>
</div>
</div>

<div id="outline-container-sec-2-6-1-1-5-4-3" class="outline-8">
<h8 id="sec-2-6-1-1-5-4-3">pry-rails</h8>
<div class="outline-text-8" id="text-2-6-1-1-5-4-3">
<p>
rails cを置き換えるのがメインで、いくつかは機能がrake taskとかぶっている。
それでも一応使いそうなのを紹介しておく。
</p>
</div>

<ul class="org-ul"><li><a id="sec-2-6-1-1-5-4-3-0-0-1" name="sec-2-6-1-1-5-4-3-0-0-1"></a>show-routes<br  /><div class="outline-text-11" id="text-2-6-1-1-5-4-3-0-0-1">
<p>
とにかく実行がめちゃくちゃ速い。spring rake routesより速いので良い。-G(&#x2013;grep)で絞り込む。
単にパスがどう引っかかるか調べたいときはrecognize-pathを使う。
</p>
</div>
</li>

<li><a id="sec-2-6-1-1-5-4-3-0-0-2" name="sec-2-6-1-1-5-4-3-0-0-2"></a>show-model, show-models<br  /><div class="outline-text-11" id="text-2-6-1-1-5-4-3-0-0-2">
<p>
schema.rbとかを開かなくてもスキーマが確認できるので便利。
show-modelsを使うと全部表示される。
</p>
</div>
</li>

<li><a id="sec-2-6-1-1-5-4-3-0-0-3" name="sec-2-6-1-1-5-4-3-0-0-3"></a>reload!<br  /><div class="outline-text-11" id="text-2-6-1-1-5-4-3-0-0-3">
<p>
rails cを再起動しなくて済む。
</p>
</div>
</li></ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> OO</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/index.html">メタプログラミングRuby</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/">毎回 の講義</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/oo.html">OO へ至る道</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/ruby_begin.html">ruby 入門</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/">講義ドキュメント</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/org-docs/meta-ruby">meta-ruby まとめ</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/note/">note</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/note/ruby-note.html">ruby-note</a> /
 <a href="http://wiki.cis.iwate-u.ac.jp/~suzuki/lects/meta-ruby/lects/poker/">poker</a> 
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> オブジェクト指向に至る軌跡</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1"><span class="section-number-4">3.1.1</span> オブジェクト指向以前</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
オブジェクト指向プログラミング、あるいはオブジェクト指向言語は、
それに至るまでの様々なアイデアを統合し、再編され、また現実
的な制約の中で歪みながら生まれてきたものだったりする。
</p>

<p>
プログラミングパラダイムは，
現実世界のプログラミングという人間活動の中で生じた
課題をどのように整理していくかという中で生まれてきた。
</p>
</div>

<div id="outline-container-sec-3-1-1-1" class="outline-5">
<h5 id="sec-3-1-1-1">Done ソフトウェア危機</h5>
<div class="outline-text-5" id="text-3-1-1-1">
<p>
<a href="http://ja.wikipedia.org/wiki/%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E5%8D%B1%E6%A9%9F">ソフトウェア危機</a> (wikipedia) とは
</p>

<p>
1960年代の後半、コンピュータが進歩するにつれて、より複雑
なソフトウェアが求められ始める時代、その複雑さをコントロールするた
めの道具やアイデアはあまり多くなかった。
</p>

<p>
プロジェクトは、複雑化する一方なのに、管理手法もなければ、データ型
は基本的な数値でしかなく、変数はメモリアロケーションそのものだった。
</p>

<p>
また、プログラムの流れは、gotoやjump命令のようにプログラムカウンタ
を直にコントロールする抽象度の低いもので制御されることが多かった。
</p>

<p>
プログラムはフローチャートで記述され、それをマシン語としてパンチす
るといったプロジェクトX的な世界のことを考えれば、その理解が正しいの
かもしれない。
</p>

<p>
なんにせよ、そういった当時の人からすると逼迫していたが、今から見る
となんとも牧歌的な世界観の中で、構造化プログラミングという概念が生
まれる。
</p>
</div>
</div>

<div id="outline-container-sec-3-1-1-2" class="outline-5">
<h5 id="sec-3-1-1-2">Done 構造化プログラミング</h5>
<div class="outline-text-5" id="text-3-1-1-2">
<p>
ダイクストラは構造化プログラミングを提案した
</p>

<p>
ときどき、勘違いされているが構造化プログラミングとは「手続き型言語」
のことでもなければ「gotoを使わないプログラミング」のことでもない。
</p>
</div>

<div id="outline-container-sec-3-1-1-2-0-1" class="outline-7">
<h7 id="sec-3-1-1-2-0-1">Todo 構造化プログラミングとは</h7>
<div class="outline-text-7" id="text-3-1-1-2-0-1">
<p>
<a href="http://ja.wikipedia.org/wiki/%E6%A7%8B%E9%80%A0%E5%8C%96%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0">構造化プログラミング(wikipedia)</a>
</p>

<ul class="org-ul">
<li>構造化プログラミングではプログラミング言語が持つステートメントを
直接使ってプログラムを記述するのではなく、
</li>
<li>それらを抽象化したステートメントを持つ仮想機械を想定し、
</li>
<li>その仮想機械上でプログラムを記述する。
</li>

<li>普通、抽象化は1段階ではなく階層的である。
<ul class="org-ul">
<li>各階層での実装の詳細は他の階層と隔離されており、
</li>
<li>実装の変更の影響はその階層内のみに留まる(Abstract data
structures)。
</li>
<li>各階層はアプリケーションに近い抽象的な方から土台に向かって順
序付けられている。
</li>
<li>この順序は各階層を設計した時間的な順番とは必ずしも一致しない
</li>
</ul>
</li>
</ul>

<p>
つまり、現代風に言い換えると「レイヤリングアーキテクチャ」のよう
なもので、ある土台の上にさらに抽象化した土台をおき、その上にさら
に・・・というようにプログラムをくみ上げていく考え方のことだ。
</p>

<p>
これは、現在のプログラミングにおいても当たり前となっている考え方
だ。
</p>

<p>
だから、我々は、ひとつのアーキテクチャないし関数の中で異なる抽象
化レイヤの実装を同居することをさける。
</p>

<p>
一方、耳目を集めやすいgoto文有害論とともに構造化技法の一部である
構造化定理(任意のフローチャートは、for文とif文で記述できる)が注目
され、手続き型プログラミング言語を現代の形に押し上げていった。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3-1-1-3" class="outline-5">
<h5 id="sec-3-1-1-3">Done モジュラプログラミング</h5>
<div class="outline-text-5" id="text-3-1-1-3">
<p>
こういった背景のなか、プログラムは大きく複雑になり続ける。至極自然
な流れとして、それを分割しようとしていく。
</p>
</div>

<div id="outline-container-sec-3-1-1-3-0-1" class="outline-7">
<h7 id="sec-3-1-1-3-0-1">凝集度と結合度</h7>
<div class="outline-text-7" id="text-3-1-1-3-0-1">
<p>
モジュールの分割には、大きな指針がなかった。現在でもやろうと思え
ば全然関係のない機能を１つのモジュールに詰め込むことはできる。
</p>

<p>
熟練したプログラマとそうでないプログラマで、作り出すモジュールの
品質は違う。その品質の尺度として、凝集度と結合度という概念がしば
らくして生まれた。
</p>

<p>
結合度：よいコラボレーションとわるいコラボレーションを定義した
<a href="http://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E5%BA%A6">http://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E5%BA%A6</a>
</p>

<p>
凝集度：よい機能群のまとめ方とわるい機能のまとめ方を定義した
<a href="http://ja.wikipedia.org/wiki/%E5%87%9D%E9%9B%86%E5%BA%A6">http://ja.wikipedia.org/wiki/%E5%87%9D%E9%9B%86%E5%BA%A6</a>
</p>

<p>
これらは「関心の分離」を行うためにどのようにするべきかという指針でもあった。
<a href="http://ja.wikipedia.org/wiki/%E9%96%A2%E5%BF%83%E3%81%AE%E5%88%86%E9%9B%A2">http://ja.wikipedia.org/wiki/%E9%96%A2%E5%BF%83%E3%81%AE%E5%88%86%E9%9B%A2</a>
</p>

<p>
この「関心」とはそのモジュールの「責任」「責務」と言い換えてもい
いかもしれない。この責任とモジュールが一致した状態にできるとその
モジュールは凝集度が高く、結合度を低くすることができる。
</p>

<p>
それぞれ悪い例と良い例を見ていき、「責任」「責務」の分解とは何か
をとらえていこう。
</p>
</div>
</div>

<div id="outline-container-sec-3-1-1-3-0-2" class="outline-7">
<h7 id="sec-3-1-1-3-0-2">悪い結合、良い結合</h7>
<div class="outline-text-7" id="text-3-1-1-3-0-2">
<p>
悪い結合としては、あるモジュールが依存しているモジュールの内部デー
タをそのまま使っていたり（内容結合）、同じグローバル変数（共通結
合）をお互いに参照していたりというようなつながり方だ。
</p>

<p>
こうなってしまうとモジュールは自分の足でたっていられなくなる。つ
まり、片方を修正するともう片方も修正せざるをえなくなったり、予想
外の動作を強いられることになる。
</p>

<p>
逆に良い結合としては、定められたデータの受け渡し(データ結合)やメッ
セージの送信（メッセージ結合）のように内部構造に依存せず、情報の
やり取りが明示的になっている状態を言う。
</p>

<p>
これはまさにカプセル化とメッセージパッシングのことだよね、と思っ
た方は正しい。オブジェクト指向は良い結合を導くために考えだされた
のだから。
</p>
</div>
</div>

<div id="outline-container-sec-3-1-1-3-0-3" class="outline-7">
<h7 id="sec-3-1-1-3-0-3">悪い凝集、良い凝集</h7>
<div class="outline-text-7" id="text-3-1-1-3-0-3">
<p>
凝集度が低い状態とは，つまり悪い凝集とは，何か，
</p>

<dl class="org-dl">
<dt> 暗合的凝集 </dt><dd>アトランダムに選んできた処理を集めたモジュールは
悪い。何を根拠に集めたのかわからないものも悪い凝集だ。
</dd>

<dt> 論理的凝集 </dt><dd>論理的に似ている処理だからという理由だけで集めて
はいけない。
</dd>
</dl>

<p>
たとえば、入出力の処理だからといって、
</p>

<div class="org-src-container">

<pre class="src src-java">function open(type,name){
    switch(type){
    case "json": ... break;
    case "yaml": ... break;
    case "csv" : ... break;
    case "txt" : ... break;
	:
    }
    return result;

}
</pre>
</div>

<p>
openという関数にif文やswitch文を大量に入れて、あらゆるopen処理を
まとめた関数をイメージしてもらいたい。（その論理的な関係を一つの
記述にまとめたいと思うこと自体は悪い発想じゃないが、同じ場所に書
くことで、もっと大事なデータとの関係が危うくなってしまう。その矛
盾をうまく解決するのが同じメッセージをデータ構造ごとに異なる解釈
をさせるポリモーフィズムだ。）
</p>

<p>
そういった種類のものがメンテナンスしづらいというのはイメージしや
すいだろう。
</p>

<dl class="org-dl">
<dt> 時間的凝集 </dt><dd>他にも同じようなタイミングで実施されるからといっ
て、モジュール化するのもの問題がある。たとえば、
initという関数の中ですべてのデータ構造の初期化を
するイメージをしてほしい。
</dd>
</dl>

<p>
一方、良い凝集とはなんなのか、それは
</p>

<dl class="org-dl">
<dt> 通信的凝集 </dt><dd>とあるデータに触れる処理をまとめることであるとか、
</dd>

<dt> 情報的凝集 </dt><dd>適切な概念とデータ構造とアルゴリズムをひとまとめ
にすること。
</dd>

<dt> 機能的凝集 </dt><dd>それによって、ひとつのうまく定義されたタスクをこ
なせるように集めることである。
</dd>
</dl>
</div>
</div>

<div id="outline-container-sec-3-1-1-3-0-4" class="outline-7">
<h7 id="sec-3-1-1-3-0-4">状態と副作用の支配</h7>
<div class="outline-text-7" id="text-3-1-1-3-0-4">
<p>
よいモジュール分割とはなにか
</p>

<ul class="org-ul">
<li>それは、処理とそれに関連するデータの関係性を明らかにして支配し
ていくことの重要性だ。

<p>
できれば、完全にデータの存在を隠蔽できてしまえると良いが、現実
のプログラムではそうは行かない場合も多い。
</p>
</li>
</ul>

<p>
こういった実務プログラミングの中で何が難しいかというと、それが状
態と副作用を持つことだ。
</p>

<p>
たとえば、
</p>
<div class="org-src-container">

<pre class="src src-java">function add(a,b){
    return a+b;
}
</pre>
</div>

<p>
このような副作用を持たない関数はテストもしやすく、バグが入り込む隙が少ない。
たとえば、計算機のレジスタ機能をこの関数に導入し、
</p>

<div class="org-src-container">

<pre class="src src-java">var r = 0;
function add(a,b){
    r = a+ (isUndefined(b)||r)
    return r
}
</pre>
</div>

<p>
このようにすると途端に考慮するべき事柄が増える。関連する状態や副
作用を含めて、関数を大別すると次のようになる。
</p>

<p>
オブジェクト指向に至るモジュラプログラミングは、こういった状態や
副作用に対して，積極的に命名，可視化，粗結合化をしていくことで
「関心の分離」を実現しようとした。
</p>

<p>
たとえば、現在でもC言語のプロジェクトなどでは，構造体とそれを引
数とする関数群ごとにモジュールを分割し，大規模なプログラミングを
行っている。構造体と関数群
</p>

<div class="org-src-container">

<pre class="src src-c">typedef struct {
    :
} Person;

void person_init(person*p,...){
    :
}

char * person_get_name(person *p){
    :
}

void person_set_name(person *p,char *name){
    :
}
</pre>
</div>

<p>
よくあるのは、上記のように構造体の名前のprefixとしてつけ、構造体
のポインタを第一引数として渡す手法だ。
</p>

<p>
その名残なのか、正確なところはよく知らないが、pythonやperlのオブ
ジェクト指向では、自分自身を表すデータが、第一引数として関数に渡
される。
</p>

<div class="org-src-container">

<pre class="src src-python">class Person(object):
    def __init__(self, a, b):
	self.a = a
	self.b = b
</pre>
</div>

<div class="org-src-container">

<pre class="src src-perl">package Person {
    sub new(){
	my ($class,$a,$b) = @_;
	my $self = bless{},$class;
	$self-&gt;init($a,$b);
	return $self;
    }
    sub init {
	my ($self,$a,$b) = @_;
	$self-&gt;{a} = $a;
	$self-&gt;{b} = $b;
    }
}
</pre>
</div>

<p>
あくまで関数の純粋性を犠牲にしないように発展を続けた関数型プログ
ラミングと、状態や副作用をデータ構造として主役にしていった手続き
型プログラミングの分かれ目として理解すると面白い。
</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">&#33879;&#32773;: suzuki@cis.iwate-u.ac.jp</p>
<p class="date">Created: 2016-10-01 土 22:34</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
